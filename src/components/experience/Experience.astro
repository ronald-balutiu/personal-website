---
const toParagraphs = (text: string) =>
  text
    .trim()
    .split(/\n\s*\n/g)
    .map((paragraph: string) => paragraph.replace(/\s*\n\s*/g, ' ').trim())
    .filter(Boolean)

const experiences = [
  {
    company: 'Amazon',
    locations: ['New York, NY', 'Seattle, WA'],
    roles: [
      {
        title: 'Software Development Engineer II',
        dateRange: 'Apr 2022 – Present',
      },
      {
        title: 'Software Development Engineer I',
        dateRange: 'Aug 2020 – Apr 2022',
      },
    ],
    highlights: `
      Led development of customer-facing features supporting millions of daily ad customers, with a focus on reliability, performance, and UX. Drove cross-team delivery by aligning engineering execution with product and design priorities. Designed and maintained scalable architectures, improving system performance and long-term maintainability. Reduced latency and operational risk through targeted performance tuning, refactors, and improved review standards. Built and shipped features across core user journeys with measurable customer and business impact.
    `,
  },
  {
    company: 'University of Chicago',
    locations: ['Chicago, IL'],
    roles: [
      {
        title: 'CSIL System Administrator',
        dateRange: 'May 2018 – Jun 2020',
      },
    ],
    highlights: `
      Maintained 65+ macOS lab machines supporting 500+ daily users. Built and maintained a Mojave image using Jenkins, Ansible, Homebrew, and JS. Led server relocation and upgrades for lab imaging, backups, and web hosting.
    `,
  },
  {
    company: 'Visa',
    locations: ['Austin, TX'],
    roles: [
      {
        title: 'Software Engineering Intern',
        dateRange: 'Jun 2019 – Sep 2019',
      },
    ],
    highlights: `
      Implemented real-time server health monitoring across 100 internal systems. Built internal tools including a custom link shortener and fleet insights dashboards. Developed security and compliance automation for 3,200+ Macs.
    `,
  },
]
---

<section id="experience" class="experience-section" aria-labelledby="experience-title">
  <div class="experience-content">
    <h2 id="experience-title" class="section-title">Experience</h2>
    <div class="experience-list">
      {
        experiences.map((company) => (
          <article class="experience-item">
            <header class="experience-company-row">
              <h3 class="experience-company">{company.company}</h3>
              <p class="experience-locations">{company.locations.join(' / ')}</p>
            </header>
            <ul class="experience-roles" aria-label={`${company.company} roles`}>
              {company.roles.map((role) => (
                <li class="experience-role-row">
                  <span class="experience-role-title">{role.title}</span>
                  <span class="experience-role-dates">{role.dateRange}</span>
                </li>
              ))}
            </ul>
            <div class="experience-summary">
              {toParagraphs(company.highlights).map((paragraph) => (
                <p class="experience-summary-paragraph">{paragraph}</p>
              ))}
            </div>
          </article>
        ))
      }
    </div>
  </div>
</section>
